# smart_assistant_gateway ?????

## ???
- .NET 8
- ASP.NET Core Minimal API
- `HttpClientFactory`????????
- Swagger/OpenAPI
- WebSocket????????

## ????
- ??????????
- ????Agent / HA Bridge???????
- ??????????????????? wake_coordinator ???

## ????
- ?????`/turn/text` ? `/api/assistant/text-turn` -> Agent `/v1/agent/respond`
- Android ?????`/api/assistant/turn`?????????????????
- ?????`/tool/call` -> HA Bridge `/v1/tools/call`
- ?????`/v1/wake/*` -> Gateway ?? `WakeArbitrationService`
- ?????`/health` ????????????????

## ????
- `GET /health`
- `POST /session/start`
- `POST /turn/text`
- `POST /api/assistant/text-turn`
- `POST /api/assistant/turn`
- `POST /tool/call`
- `GET/WS /turn/stream`
- `POST /v1/wake/claim`
- `POST /v1/wake/heartbeat`
- `POST /v1/wake/validate`
- `POST /v1/wake/release`

?????`docs/openapi/gateway.openapi.yaml`

## ????
?????`src/SmartAssistant.Gateway/appsettings.json`

- `Services:AgentBaseUrl`??? `http://localhost:8091`?
- `Services:HomeAssistantBridgeBaseUrl`??? `http://localhost:8092`?
- `WakeArbitration:LockTtlMs`??? `8000`?

???????
- `Services__AgentBaseUrl`
- `Services__HomeAssistantBridgeBaseUrl`
- `WakeArbitration__LockTtlMs`

?????
- ?????? `src/SmartAssistant.Gateway/Properties/launchSettings.json`
- ?????? `http://0.0.0.0:8080`?????/?????

## ????
```powershell
dotnet run --project src/SmartAssistant.Gateway/SmartAssistant.Gateway.csproj --urls http://0.0.0.0:8080
```

???
- `GET http://<gateway-ip>:8080/health`
